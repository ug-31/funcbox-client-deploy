(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,a){},28:function(e,t,a){},30:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),s=a.n(c),o=(a(28),a(2)),l=a(6),i=a.n(l),u=a(10),b=a(11),j=(a(30),a(21)),h=a(3),d=a(5),m=(a(31),a(1)),p=function(e){var t=e.setAuth,a=e.isAuthenticated;return Object(m.jsx)(n.Fragment,{children:Object(m.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:[Object(m.jsx)("a",{className:"navbar-brand",href:"/dashboard",children:"Dashboard"}),Object(m.jsx)("ul",{className:"navbar-nav mr-auto",children:Object(m.jsx)("li",{className:"nav-item active",children:Object(m.jsxs)("a",{className:"nav-link",href:"/bucket",children:["Bucket ",Object(m.jsx)("span",{className:"sr-only",children:"(current)"})]})})}),Object(m.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(m.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(m.jsx)("li",{className:"nav-item active",children:!0===!a&&Object(m.jsxs)("a",{className:"nav-link",href:"/login",children:["Login ",Object(m.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(m.jsx)("li",{className:"nav-item active",children:!0===!a&&Object(m.jsx)("a",{className:"nav-link",href:"/register",children:"Register"})}),Object(m.jsx)("li",{className:"nav-item active",children:!0===a&&Object(m.jsx)("a",{className:"nav-link",href:"/login",onClick:function(e){e.preventDefault(),localStorage.removeItem("token"),t(!1),d.b.success("You Loggedout successfully")},children:"Logout"})})]})})]})})},x=a(12),O=(a(19),function(e){var t=e.setAuth,a=Object(n.useState)({email:"",password:""}),r=Object(b.a)(a,2),c=r[0],s=r[1],l=function(e){s(Object(o.a)(Object(o.a)({},c),{},Object(x.a)({},e.target.name,e.target.value)))},j=function(){var e=Object(u.a)(i.a.mark((function e(a){var n,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={email:h,password:p},e.next=5,fetch("https://ug31-funcbox-server.herokuapp.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,e.next=8,r.json();case 8:(l=e.sent).token?(localStorage.setItem("token",l.token),t(!0),d.b.success("Logged in successfully!")):(console.error(l),d.b.error(l),s(Object(o.a)(Object(o.a)({},c),{},{password:""}))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),t(!1),console.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),h=c.email,p=c.password;return Object(m.jsx)(n.Fragment,{children:Object(m.jsxs)("form",{className:"login-form",onSubmit:j,children:[Object(m.jsx)("h3",{className:"text-center",children:"Login"}),Object(m.jsxs)("div",{className:"form-group ",children:[Object(m.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(m.jsx)("input",{name:"email",type:"email",className:"form-control",id:"email",placeholder:"Enter email",value:h,onChange:l})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{name:"password",type:"password",className:"form-control",id:"password",placeholder:"Password",value:p,onChange:l})]}),Object(m.jsx)("button",{type:"submit",className:"btn btn-success btn-block",children:"Login"}),Object(m.jsx)("br",{}),Object(m.jsx)("a",{href:"/register",children:"Don't Have an Account? Register Here"})]})})}),f=function(e){var t=e.setAuth,a=Object(n.useState)({name:"",email:"",password:""}),r=Object(b.a)(a,2),c=r[0],s=r[1],l=function(e){s(Object(o.a)(Object(o.a)({},c),{},Object(x.a)({},e.target.name,e.target.value)))},j=function(){var e=Object(u.a)(i.a.mark((function e(a){var n,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={name:h,email:p,password:O},e.next=5,fetch("https://ug31-funcbox-server.herokuapp.com/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,e.next=8,r.json();case 8:(l=e.sent).token?(localStorage.setItem("token",l.token),t(!0),d.b.success("Successfully Registered")):(t(!1),d.b.error(l),s(Object(o.a)(Object(o.a)({},c),{},{password:""}))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0.message),d.b.error("Some error");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),h=c.name,p=c.email,O=c.password;return Object(m.jsx)(n.Fragment,{children:Object(m.jsxs)("form",{className:"login-form",onSubmit:j,children:[Object(m.jsx)("h3",{className:"text-center",children:"Register"}),Object(m.jsxs)("div",{className:"form-group ",children:[Object(m.jsx)("label",{htmlFor:"name",children:"Name"}),Object(m.jsx)("input",{name:"name",type:"text",className:"form-control",id:"name",placeholder:"Enter name",value:h,onChange:l})]}),Object(m.jsxs)("div",{className:"form-group ",children:[Object(m.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(m.jsx)("input",{name:"email",type:"email",className:"form-control",id:"email",placeholder:"Enter email",value:p,onChange:l})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{name:"password",type:"password",className:"form-control",id:"password",placeholder:"Password",value:O,onChange:l})]}),Object(m.jsx)("button",{type:"submit",className:"btn btn-success btn-block",children:"Register"}),Object(m.jsx)("br",{}),Object(m.jsx)("a",{href:"/login",children:"Already Signed up? Click here to Login"})]})})},v=function(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)({bname:"",text:""}),s=Object(b.a)(c,2),l=s[0],j=s[1],h=function(e){j(Object(o.a)(Object(o.a)({},l),{},Object(x.a)({},e.target.name,e.target.value)))},p=function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://ug31-funcbox-server.herokuapp.com/dashboard/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,r(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,a={bname:f,text:v},e.next=5,fetch("https://ug31-funcbox-server.herokuapp.com/dashboard",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(a)});case 5:return n=e.sent,e.next=8,n.json();case 8:r=e.sent,200!==n.status?d.b.error(r):d.b.success(r),j(Object(o.a)(Object(o.a)({},l),{},{text:""})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){p()}),[]);var f=l.bname,v=l.text;return Object(m.jsx)(n.Fragment,{children:Object(m.jsx)(n.Fragment,{children:Object(m.jsxs)("form",{className:"login-form",onSubmit:O,children:[Object(m.jsxs)("h3",{className:"text-center",children:["Hello, ",a]}),Object(m.jsxs)("div",{className:"form-group ",children:[Object(m.jsx)("label",{htmlFor:"bname",children:"Bucket Name"}),Object(m.jsx)("input",{name:"bname",type:"text",className:"form-control",id:"bname",placeholder:"Enter Bucket Name",value:f,onChange:h})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"text",children:"Input Text"}),Object(m.jsx)("textarea",{name:"text",type:"text",className:"form-control",id:"text",placeholder:"Input Text",rows:"10",cols:"30",value:v,onChange:h})]}),Object(m.jsx)("button",{type:"submit",className:"btn btn-success btn-block",children:"Submit"})]})})})},g=function(e){var t=e.isAuthenticated,a=Object(n.useState)([]),r=Object(b.a)(a,2),c=r[0],s=r[1],o=function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://ug31-funcbox-server.herokuapp.com/dashboard/bucket",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).name?(s(a.buckets),d.b.success("Buckets Fetched Successfully")):d.b.error("Please Login to view your Buckets"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o()}),[]),Object(m.jsxs)(n.Fragment,{children:[" ",Object(m.jsxs)("table",{className:"table mt-5 text-center",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Bucket Name"}),Object(m.jsx)("th",{children:"Text"})]})}),Object(m.jsx)("tbody",{children:!0===t&&c.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e.bname}),Object(m.jsx)("td",{children:e.text})]},e._id)}))})]})]})};d.b.configure();var k=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],r=t[1],c=function(e){r(e)},s=function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://ug31-funcbox-server.herokuapp.com/auth/verify",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,console.log(a),r(!0===a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s()}),[]),Object(m.jsxs)(j.a,{children:[Object(m.jsx)(p,{setAuth:c,isAuthenticated:a}),Object(m.jsx)(h.d,{children:Object(m.jsxs)(n.Fragment,{children:[Object(m.jsx)(d.a,{}),Object(m.jsx)(h.b,{exact:!0,path:"/",render:function(e){return a?Object(m.jsx)(h.a,{to:"/dashboard"}):Object(m.jsx)(O,Object(o.a)(Object(o.a)({},e),{},{setAuth:c}))}}),Object(m.jsx)(h.b,{exact:!0,path:"/login",render:function(e){return a?Object(m.jsx)(h.a,{to:"/dashboard"}):Object(m.jsx)(O,Object(o.a)(Object(o.a)({},e),{},{setAuth:c}))}}),Object(m.jsx)(h.b,{exact:!0,path:"/dashboard",render:function(e){return a?Object(m.jsx)(v,Object(o.a)(Object(o.a)({},e),{},{setAuth:c})):Object(m.jsx)(h.a,{to:"/login"})}}),Object(m.jsx)(h.b,{exact:!0,path:"/register",render:function(e){return a?Object(m.jsx)(h.a,{to:"/login"}):Object(m.jsx)(f,Object(o.a)(Object(o.a)({},e),{},{setAuth:c}))}}),Object(m.jsx)(h.b,{exact:!0,path:"/bucket",render:function(e){return Object(m.jsx)(g,Object(o.a)(Object(o.a)({},e),{},{setAuth:c,isAuthenticated:a}))}})]})})]})};s.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.27f71938.chunk.js.map